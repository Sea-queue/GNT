<H1>Statistics of Nurses:</H1>
<% user = GntUser.where(:role =>'candidate')%>
There are <em style="font-size:25px"><%= user.count %> candidates</em> in the database.

<ul>
  <% GntUser.all.each do |user| %>
    <% if not user.admin? %>
      <li>
        <%= link_to user.first_name, user %>
      </li>
    <% end %>
  <% end %>
</ul>

<h1>Candidates Search and Filters:</h1>

<%= form_with url: "/statistics", method: :get do |f| %>
  <%= f.label :search_name, "Type Name Here:" %>
  <%= f.text_field :search_name %>
  <%= f.submit "Search", class:"btn btn-primary" %>
<% end %>

<br>

<form action="/statistics" method="GET">
  <label for="filter">Filter Options</label>
  <select id="filter" name="filter" onchange="this.form.submit()">
    <option value="">Pick a Filter Option</option>
    <option value="nationality" <%= "selected" if session[:filter] == "nationality" %>>Filter by nationality</option>
    <option value="languages_spoken" <%= "selected" if session[:filter] == "languages_spoken" %>>Filter by languages_spoken</option>
  </select>
  <% if session[:filter] == "nationality" %>
    <select name="filter_option" onchange="this.form.submit()">
      <option value="">Pick a nationality</option>
      <option value="MX">Mexico</option>
      <option value="SP">Singapore</option>
      <option value="CL">Chile</option>
    </select>
  <% elsif session[:filter] == "languages_spoken" %>
    <select name="filter_option" onchange="this.form.submit()">
      <option value="">Pick a language</option>
      <option value="English">English</option>
      <option value="Spanish">Spanish</option>
      <option value="Chinese">Chinese</option>
    </select>
  <% end %>
</form>

<% @users.each do |candidate| %>
  <li>
    <%= link_to "#{candidate.first_name}", candidate %>
  </li>
<% end %>

